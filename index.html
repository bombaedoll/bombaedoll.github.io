<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BombaeDoll OS // Kundali Matrix</title>
  <style>
    /* 1. Core Environment */
    body, html {
      margin: 0;
      padding: 0;
      background-color: #050002; /* Deep void black-pink */
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: 'Courier New', Courier, monospace;
      -webkit-tap-highlight-color: transparent; /* Removes default iPhone tap flash */
    }

    /* 2. The Game Console (Sized for iPhone 13 Pro Max / 16) */
    .portal-wrapper {
      position: relative;
      width: 100%;
      max-width: 430px; 
      aspect-ratio: 9/16; 
      margin: 0 auto;
      overflow: hidden;
      background-color: #000;
      box-shadow: 0 0 20px rgba(255, 0, 85, 0.15); /* Subtle pink glow */
    }

    .portal-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      pointer-events: none; /* Stops the video from intercepting taps */
    }

    /* 3. The Interactive Hitboxes */
    .hitbox {
      position: absolute;
      text-decoration: none;
      background-color: rgba(255, 255, 255, 0); /* Invisible */
      border: none;
      cursor: pointer;
      z-index: 10;
      border-radius: 6px;
      transition: background-color 0.15s ease;
      
      /* Initially disabled so they don't overlap randomly */
      pointer-events: none; 
      
      /* ðŸŸ¢ DEBUG MODE: Change to solid border to see them turn on/off */
      /* border: 2px solid lime; background-color: rgba(0, 255, 0, 0.2); */
    }

    /* Game Controller Feedback */
    .hitbox:active {
      background-color: rgba(255, 0, 106, 0.4); /* Flashes Nana-pink when tapped */
    }

    /* Scene 1: The Error Popup */
    .ok-btn {
      top: 48%; 
      left: 50%;
      transform: translate(-50%, -50%);
      width: 28%; 
      height: 5.5%;
    }

    /* Scene 2: The Anime Girl Final Button */
    .generate-btn {
      top: 96%; 
      left: 50%;
      transform: translate(-50%, -50%);
      width: 32%;
      height: 4%;
    }

    /* 4. The Authentic Vedic Link Overlay */
    /* This makes the transition feel like part of your OS, not a scammy ad */
    .status-text {
      position: absolute;
      top: 2%;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 105, 180, 0.6);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 2px;
      z-index: 5;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <div class="portal-wrapper">
    <div class="status-text">System Live // Awaiting Chart</div>

    <video 
      id="mainVideo"
      autoplay 
      muted 
      loop 
      playsinline 
      preload="auto"
      class="portal-video">
      <source src="https://res.cloudinary.com/dakr3xva1/video/upload/v1771239329/portal-loop-muted.mp4_dvnshd.mp4" type="video/mp4">
    </video>

    <a href="https://www.astrosage.com/freechart/" target="_blank" class="hitbox ok-btn" id="btnOk"></a>

    <a href="https://www.astrosage.com/freechart/" target="_blank" class="hitbox generate-btn" id="btnGen"></a>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const video = document.getElementById("mainVideo");
      const btnOk = document.getElementById("btnOk");
      const btnGen = document.getElementById("btnGen");

      // 1. THE SAFARI OVERRIDE
      // If Apple blocks autoplay, the very first screen tap forces it to play.
      let hasStarted = false;
      document.body.addEventListener('touchstart', () => {
        if (!hasStarted) {
          video.play();
          hasStarted = true;
        }
      }, { once: true });

      video.play().then(() => { hasStarted = true; }).catch(e => {
        console.log("Waiting for user tap to start video...");
      });

      // 2. THE SCENE TRACKER (Interactive Game Logic)
      video.addEventListener('timeupdate', () => {
        const time = video.currentTime;

        // From 0 to 4 seconds: The red Error popup is visible
        if (time < 4.0) {
          btnOk.style.pointerEvents = "auto";   // Turn ON 'OK'
          btnGen.style.pointerEvents = "none";  // Turn OFF 'Generate'
        } 
        // From 4 seconds onward: The portal opens, anime girl appears
        else if (time >= 4.0) {
          btnOk.style.pointerEvents = "none";   // Turn OFF 'OK'
          btnGen.style.pointerEvents = "auto";  // Turn ON 'Generate'
        }
      });
    });
  </script>

</body>
</html>
